

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="pt-BR" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="pt-BR" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>A Arquitetura &mdash; Documentação do Symfony  documentação</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="next" title="Começando" href="../getting_started/index.html" />
    <link rel="prev" title="Flex: Componha sua Aplicação" href="flex_recipes.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Documentação do Symfony
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">O Tour Rápido</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="the_big_picture.html">A Visão Geral</a></li>
<li class="toctree-l2"><a class="reference internal" href="flex_recipes.html">Flex: Componha sua Aplicação</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">A Arquitetura</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#adicione-logging">Adicione Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="#servicos-e-autowiring">Serviços e Autowiring</a></li>
<li class="toctree-l3"><a class="reference internal" href="#criando-servicos">Criando Serviços</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extensao-do-twig-e-configuracao-automatica">Extensão do Twig e Configuração Automática</a></li>
<li class="toctree-l3"><a class="reference internal" href="#super-velocidade-o-container-armazenado-em-cache">Super Velocidade: O Container Armazenado em Cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="#desenvolvimento-versus-producao-ambientes">Desenvolvimento versus Produção: Ambientes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#variaveis-de-ambiente">Variáveis de Ambiente</a></li>
<li class="toctree-l3"><a class="reference internal" href="#continue">Continue!</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Começando</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mailer.html">Enviando E-mails com o Mailer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../setup.html">Instalando e Configurando o Symfony Framework</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../components/index.html">Os Componentes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Documentos de Referência</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contribuindo</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../create_framework/index.html">Crie seu próprio Framework PHP</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Documentação do Symfony</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">O Tour Rápido</a> &raquo;</li>
        
      <li>A Arquitetura</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/adielcristo/symfony-doc-pt-br/blob/5.0/quick_tour/the_architecture.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="a-arquitetura">
<h1>A Arquitetura<a class="headerlink" href="#a-arquitetura" title="Link permanente para este título">¶</a></h1>
<p>Você é minha heroína! Quem diria que você ainda estaria aqui depois das duas
primeiras partes? Seus esforços serão bem recompensados em breve. Nas duas primeiras partes não analisamos
profundamente a arquitetura do framework. Já que ela faz o Symfony se destacar
na multidão de frameworks, vamos mergulhar na arquitetura agora.</p>
<div class="section" id="adicione-logging">
<h2>Adicione Logging<a class="headerlink" href="#adicione-logging" title="Link permanente para este título">¶</a></h2>
<p>Uma nova aplicação Symfony é micro: ela é basicamente apenas um sistema de roteamento e controllers. Mas,
graças ao Flex, a instalação de mais recursos é simples.</p>
<p>Quer um sistema de logging? Sem problema:</p>
<div class="literal-block"><div class="highlight-terminal"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> composer require logger
</pre></div>
</td></tr></table></div></div>
<p>Isso instala e configura (através de uma receita) a poderosa biblioteca <a class="reference external" href="https://github.com/Seldaek/monolog">Monolog</a>. Para
usar o logger em um controller, adicione um novo argumento com a declaração de tipo <code class="docutils literal notranslate">LoggerInterface</code>:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/DefaultController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Psr\Log\LoggerInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\AbstractController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">DefaultController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/hello/{name}&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nx">LoggerInterface</span> <span class="nv">$logger</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s2">&quot;Dizendo olá para </span><span class="si">$name</span><span class="s2">!&quot;</span><span class="p">);</span>

        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>É isso aí! A nova mensagem de log será gravada em <code class="docutils literal notranslate">var/log/dev.log</code>. O caminho
do arquivo de log ou mesmo um método diferente de logging podem ser configurados atualizando
um dos arquivos de configuração adicionados pela receita.</p>
</div>
<div class="section" id="servicos-e-autowiring">
<h2>Serviços e Autowiring<a class="headerlink" href="#servicos-e-autowiring" title="Link permanente para este título">¶</a></h2>
<p>Mas espere! Algo <em>muito</em> legal acabou de acontecer. O Symfony leu a declaração de tipo
<code class="docutils literal notranslate">LoggerInterface</code> e descobriu automaticamente que deveria nos passar o objeto Logger!
Isso é chamado de <em>autowiring</em>.</p>
<p>Todo trabalho realizado numa aplicação Symfony é feito por um <em>objeto</em>: o objeto
Logger registra coisas e o objeto Twig renderiza templates. Estes objetos são chamados
<em>serviços</em> e são <em>ferramentas</em> que te ajudam a construir recursos avançados.</p>
<p>Para tornar a vida incrível, você pode pedir ao Symfony para te fornecer um serviço usando uma declaração de tipo.
Quais outras possíveis classes ou interfaces você poderia usar? Descubra executando:</p>
<div class="literal-block"><div class="highlight-terminal"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> php bin/console debug:autowiring

<span class="go">  # esta é apenas uma *pequena* amostra da saída...</span>

<span class="go">  Describes a logger instance.</span>
<span class="go">  Psr\Log\LoggerInterface (monolog.logger)</span>

<span class="go">  Request stack that controls the lifecycle of requests.</span>
<span class="go">  Symfony\Component\HttpFoundation\RequestStack (request_stack)</span>

<span class="go">  Interface for the session.</span>
<span class="go">  Symfony\Component\HttpFoundation\Session\SessionInterface (session)</span>

<span class="go">  RouterInterface is the interface that all Router classes must implement.</span>
<span class="go">  Symfony\Component\Routing\RouterInterface (router.default)</span>

<span class="go">  [...]</span>
</pre></div>
</td></tr></table></div></div>
<p>Este é apenas um breve resumo da lista completa! E à medida que você adiciona mais pacotes esta
lista de ferramentas aumenta!</p>
</div>
<div class="section" id="criando-servicos">
<h2>Criando Serviços<a class="headerlink" href="#criando-servicos" title="Link permanente para este título">¶</a></h2>
<p>Para manter seu código organizado você pode até mesmo criar seus próprios serviços! Suponha que você
queira gerar uma saudação aleatória (por exemplo, &quot;Olá&quot;, &quot;Yo&quot;, etc). Em vez de colocar
esse código diretamente no seu controller, crie uma nova classe:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/GreetingGenerator.php</span>
<span class="k">namespace</span> <span class="nx">App</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">GreetingGenerator</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getRandomGreeting</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$greetings</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Ei&#39;</span><span class="p">,</span> <span class="s1">&#39;Yo&#39;</span><span class="p">,</span> <span class="s1">&#39;Aloha&#39;</span><span class="p">];</span>
        <span class="nv">$greeting</span> <span class="o">=</span> <span class="nv">$greetings</span><span class="p">[</span><span class="nb">array_rand</span><span class="p">(</span><span class="nv">$greetings</span><span class="p">)];</span>

        <span class="k">return</span> <span class="nv">$greeting</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Ótimo! Você pode usar ela imediatamente no seu controller:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/DefaultController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\GreetingGenerator</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Psr\Log\LoggerInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\AbstractController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">DefaultController</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/hello/{name}&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nx">LoggerInterface</span> <span class="nv">$logger</span><span class="p">,</span> <span class="nx">GreetingGenerator</span> <span class="nv">$generator</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$greeting</span> <span class="o">=</span> <span class="nv">$generator</span><span class="o">-&gt;</span><span class="na">getRandomGreeting</span><span class="p">();</span>

        <span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s2">&quot;Dizendo </span><span class="si">$greeting</span><span class="s2"> para </span><span class="si">$name</span><span class="s2">!&quot;</span><span class="p">);</span>

        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>É isso aí! O Symfony instancia o <code class="docutils literal notranslate">GreetingGenerator</code> automaticamente e
o passa como um argumento. Mas, <em>também</em> poderíamos mover a lógica do logger para <code class="docutils literal notranslate">GreetingGenerator</code>?
Sim! Você pode usar o autowiring dentro de um serviço para acessar <em>outros</em> serviços. A única
diferença é que isso é feito no construtor:</p>
<div class="literal-block"><div class="highlight-diff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span>// src/GreetingGenerator.php
<span class="gi">+ use Psr\Log\LoggerInterface;</span>

class GreetingGenerator
{
<span class="gi">+     private $logger;</span>
<span class="gi">+</span>
<span class="gi">+     public function __construct(LoggerInterface $logger)</span>
<span class="gi">+     {</span>
<span class="gi">+         $this-&gt;logger = $logger;</span>
<span class="gi">+     }</span>

    public function getRandomGreeting()
    {
        // ...

 +        $this-&gt;logger-&gt;info(&#39;Usando a saudação: &#39;.$greeting);

         return $greeting;
    }
}
</pre></div>
</td></tr></table></div></div>
<p>Isso! Assim também funciona: sem configuração, sem perda de tempo. Continue codando!</p>
</div>
<div class="section" id="extensao-do-twig-e-configuracao-automatica">
<h2>Extensão do Twig e Configuração Automática<a class="headerlink" href="#extensao-do-twig-e-configuracao-automatica" title="Link permanente para este título">¶</a></h2>
<p>Graças ao gerenciamento de serviços do Symfony, você pode <em>extender</em> o Symfony de várias maneiras, por exemplo,
criando um subscriber de evento ou um voter de segurança para regras complexas de
autorização. Vamos adicionar um novo filtro ao Twig chamado <code class="docutils literal notranslate">greet</code>. Como? Crie uma classe
que extende <code class="docutils literal notranslate">AbstractExtension</code>:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Twig/GreetExtension.php</span>
<span class="k">namespace</span> <span class="nx">App\Twig</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\GreetingGenerator</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Twig\Extension\AbstractExtension</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Twig\TwigFilter</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">GreetExtension</span> <span class="k">extends</span> <span class="nx">AbstractExtension</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$greetingGenerator</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">GreetingGenerator</span> <span class="nv">$greetingGenerator</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">greetingGenerator</span> <span class="o">=</span> <span class="nv">$greetingGenerator</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getFilters</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="k">new</span> <span class="nx">TwigFilter</span><span class="p">(</span><span class="s1">&#39;greet&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nv">$this</span><span class="p">,</span> <span class="s1">&#39;greetUser&#39;</span><span class="p">]),</span>
        <span class="p">];</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">greetUser</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$greeting</span> <span class="o">=</span>  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">greetingGenerator</span><span class="o">-&gt;</span><span class="na">getRandomGreeting</span><span class="p">();</span>

        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">$greeting</span><span class="s2">, </span><span class="si">$name</span><span class="s2">!&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Após criar apenas <em>um</em> arquivo, você pode usá-lo imediatamente:</p>
<div class="literal-block"><div class="highlight-html+twig"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">{# templates/default/index.html.twig #}</span>
<span class="c">{# Irá imprimir algo como &quot;Ei, Symfony!&quot; #}</span>
<span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">name</span><span class="o">|</span><span class="nf">greet</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div></div>
<p>Como isso funciona? O Symfony nota que sua classe extende <code class="docutils literal notranslate">AbstractExtension</code>
e então <em>automaticamente</em> a registra como uma extensão do Twig. Isso é chamado de configuração automática
e funciona para <em>muitas</em> coisas. Crie uma classe e depois extenda uma classe base
(ou implemente uma interface). O Symfony cuida do resto.</p>
</div>
<div class="section" id="super-velocidade-o-container-armazenado-em-cache">
<h2>Super Velocidade: O Container Armazenado em Cache<a class="headerlink" href="#super-velocidade-o-container-armazenado-em-cache" title="Link permanente para este título">¶</a></h2>
<p>Depois de ver quanta coisa o Symfony gerencia automaticamente, você pode estar se perguntando: &quot;Isso não
prejudica o desempenho?&quot; Na verdade, não! O Symfony é super rápido.</p>
<p>Como isso é possível? O sistema de serviços é gerenciado por um objeto muito importante chamado
&quot;container&quot;. A maioria dos frameworks tem um container, mas o do Symfony é único porque
ele é <em>armazenado em cache</em>. Quando você carregou sua primeira página, todas as informações de serviço foram
compiladas e salvas. Isso significa que os recursos de autowiring e configuração automática
<em>não</em> adicionam nenhuma sobrecarga! Isso também significa que você obtém <em>grandes</em> erros: o Symfony inspeciona e
valida <em>tudo</em> quando o container é construído.</p>
<p>Agora você deve estar se perguntando o que acontece quando você atualiza um arquivo e o cache precisa
ser reconstruído? Eu gosto da sua forma de pensar! O cache é inteligente o suficiente para se reconstruir no próximo carregamento
de página. Mas esse é realmente o tópico da próxima seção.</p>
</div>
<div class="section" id="desenvolvimento-versus-producao-ambientes">
<h2>Desenvolvimento versus Produção: Ambientes<a class="headerlink" href="#desenvolvimento-versus-producao-ambientes" title="Link permanente para este título">¶</a></h2>
<p>Um dos principais trabalhos de um framework é facilitar a depuração! E nossa aplicação está <em>cheia</em> de
ótimas ferramentas para isso: a barra de ferramentas de depuração web é exibida na parte inferior da página, os erros
são grandes, bonitos e explícitos, e qualquer cache de configuração é reconstruído automaticamente
sempre que necessário.</p>
<p>Mas e quando você implanta em produção? Precisamos esconder estas ferramentas e
otimizar a velocidade!</p>
<p>Isso é resolvido pelo sistema de <em>ambiente</em> do Symfony e existem três: <code class="docutils literal notranslate">dev</code>, <code class="docutils literal notranslate">prod</code>
e <code class="docutils literal notranslate">test</code>. Com base no ambiente o Symfony carrega arquivos diferentes no diretório
<code class="docutils literal notranslate">config/</code>:</p>
<div class="literal-block"><div class="highlight-text"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span>config/
├─ services.yaml
├─ ...
└─ packages/
    ├─ framework.yaml
    ├─ ...
    ├─ **dev/**
        ├─ monolog.yaml
        └─ ...
    ├─ **prod/**
        └─ monolog.yaml
    └─ **test/**
        ├─ framework.yaml
        └─ ...
└─ routes/
    ├─ annotations.yaml
    └─ **dev/**
        ├─ twig.yaml
        └─ web_profiler.yaml
</pre></div>
</td></tr></table></div></div>
<p>Essa é uma idéia <em>poderosa</em>: ao alterar uma parte da configuração (o ambiente),
sua aplicação é transformada de uma experiência amigável à depuração para uma otimizada
para velocidade.</p>
<p>Ah, como você altera o ambiente? Altere a variável de ambiente <code class="docutils literal notranslate">APP_ENV</code>
de <code class="docutils literal notranslate">dev</code> para <code class="docutils literal notranslate">prod</code>:</p>
<div class="literal-block"><div class="highlight-diff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span># .env
<span class="gd">- APP_ENV=dev</span>
<span class="gi">+ APP_ENV=prod</span>
</pre></div>
</td></tr></table></div></div>
<p>Mas quero falar mais sobre variáveis de ambiente a seguir. Altere o valor de volta
para <code class="docutils literal notranslate">dev</code>: ferramentas de depuração são ótimas quando você está trabalhando localmente.</p>
</div>
<div class="section" id="variaveis-de-ambiente">
<h2>Variáveis de Ambiente<a class="headerlink" href="#variaveis-de-ambiente" title="Link permanente para este título">¶</a></h2>
<p>Toda aplicação contém configuração que é diferente em cada servidor - como informação
de conexão com o banco de dados ou senhas. Como elas devem ser armazenadas? Em arquivos? Ou de alguma
outra forma?</p>
<p>O Symfony segue as melhores práticas da indústria armazenando as configurações baseadas em servidor
como variáveis de <em>ambiente</em>. Isso significa que o Symfony funciona <em>perfeitamente</em> com
os sistemas de implantação de Plataformas como Serviço (PaaS) e com o Docker.</p>
<p>Mas definir variáveis de ambiente durante o desenvolvimento pode ser doloroso. É por isso que sua
aplicação carrega automaticamente um arquivo <code class="docutils literal notranslate">.env</code>. As chaves neste arquivo se tornam variáveis
de ambiente e são lidas pela sua aplicação:</p>
<div class="literal-block"><div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># .env</span>
<span class="c1">###&gt; symfony/framework-bundle ###</span>
<span class="nv">APP_ENV</span><span class="o">=</span>dev
<span class="nv">APP_SECRET</span><span class="o">=</span>cc86c7ca937636d5ddf1b754beb22a10
<span class="c1">###&lt; symfony/framework-bundle ###</span>
</pre></div>
</td></tr></table></div></div>
<p>A princípio, o arquivo não contém muita coisa. Mas à medida que sua aplicação cresce, você adicionará mais
configurações conforme necessário. Mas, na verdade, isso fica muito mais interessante! Suponha que
sua aplicação precisa de um ORM de banco de dados. Vamos instalar o Doctrine ORM:</p>
<div class="literal-block"><div class="highlight-terminal"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> composer require doctrine
</pre></div>
</td></tr></table></div></div>
<p>Graças a uma nova receita instalada pelo Flex, olhe o arquivo <code class="docutils literal notranslate">.env</code> novamente:</p>
<div class="literal-block"><div class="highlight-diff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span>###&gt; symfony/framework-bundle ###
APP_ENV=dev
APP_SECRET=cc86c7ca937636d5ddf1b754beb22a10
###&lt; symfony/framework-bundle ###

<span class="gi">+ ###&gt; doctrine/doctrine-bundle ###</span>
<span class="gi">+ # ...</span>
<span class="gi">+ DATABASE_URL=mysql://db_user:db_password@127.0.0.1:3306/db_name</span>
<span class="gi">+ ###&lt; doctrine/doctrine-bundle ###</span>
</pre></div>
</td></tr></table></div></div>
<p>A nova variável de ambiente <code class="docutils literal notranslate">DATABASE_URL</code> foi adicionada <em>automaticamente</em> e já é
referenciada pelo novo arquivo de configuração <code class="docutils literal notranslate">doctrine.yaml</code>. Ao combinar variáveis
de ambiente e o Flex, você está usando as melhores práticas da indústria sem nenhum esforço extra.</p>
</div>
<div class="section" id="continue">
<h2>Continue!<a class="headerlink" href="#continue" title="Link permanente para este título">¶</a></h2>
<p>Pode me chamar de louco, mas depois de ler esta parte, você deve se sentir confortável com as partes
mais <em>importantes</em> do Symfony. Tudo no Symfony foi projetado para te ajudar ao máximo
para que você possa continuar codando e adicionando recursos, tudo com a velocidade e a qualidade que você
exige.</p>
<p>Isso é tudo para o tour rápido. Da autenticação aos formulários e ao cache, ainda há
muito mais a descobrir. Pronta para mergulhar nestes tópicos agora? Não procure mais - vá
para a <a class="reference internal" href="../index.html"><em>Documentação do Symfony</em></a> e escolha o guia que desejar.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../getting_started/index.html" class="btn btn-neutral float-right" title="Começando" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="flex_recipes.html" class="btn btn-neutral" title="Flex: Componha sua Aplicação" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            LANGUAGE:'pt_BR',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>