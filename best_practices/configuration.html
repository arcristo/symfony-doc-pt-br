

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="pt-BR" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="pt-BR" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuração &mdash; Documentação do Symfony  documentação</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Documentação do Symfony
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../quick_tour/index.html">O Tour Rápido</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Começando</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mailer.html">Enviando E-mails com o Mailer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../setup.html">Instalando e Configurando o Symfony Framework</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../components/index.html">Os Componentes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Documentos de Referência</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contribuindo</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../create_framework/index.html">Crie seu próprio Framework PHP</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Documentação do Symfony</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Configuração</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/adielcristo/symfony-doc-pt-br/blob/5.0/best_practices/configuration.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configuracao">
<h1>Configuração<a class="headerlink" href="#configuracao" title="Link permanente para este título">¶</a></h1>
<p>A configuração geralmente envolve diferentes partes da aplicação (como infraestrutura
e credenciais de segurança) e diferentes ambientes (desenvolvimento, produção).
É por isso que o Symfony recomenda dividir a configuração da aplicação em
três partes.</p>
<div class="section" id="configuracao-relacionada-a-infraestrutura">
<span id="config-parameters-yml"></span><h2>Configuração Relacionada à Infraestrutura<a class="headerlink" href="#configuracao-relacionada-a-infraestrutura" title="Link permanente para este título">¶</a></h2>
<p>Estas são as opções que mudam de uma máquina para outra (por exemplo, da sua
máquina de desenvolvimento para o servidor de produção), mas que não alteram
o comportamento da aplicação.</p>
<div class="admonition-best-practice admonition best-practice">
<p class="first admonition-title">Best Practice</p>
<p class="last">Defina as opções de configuração relacionadas à infraestrutura como
<code class="xref doc docutils literal notranslate">variáveis de ambiente</code>. Durante o
desenvolvimento, use os arquivos <code class="docutils literal notranslate">.env</code> e <code class="docutils literal notranslate">.env.local</code> localizados no diretório
raiz do seu projeto para setá-las.</p>
</div></div>
<p>Por padrão, o Symfony adiciona esses tipos de opções no arquivo <code class="docutils literal notranslate">.env</code> ao
instalar novas dependências na aplicação:</p>
<div class="literal-block"><div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># .env</span>
<span class="c1">###&gt; doctrine/doctrine-bundle ###</span>
<span class="nv">DATABASE_URL</span><span class="o">=</span>sqlite:///%kernel.project_dir%/var/data/blog.sqlite
<span class="c1">###&lt; doctrine/doctrine-bundle ###</span>

<span class="c1">###&gt; symfony/swiftmailer-bundle ###</span>
<span class="nv">MAILER_URL</span><span class="o">=</span>smtp://localhost?encryption<span class="o">=</span>ssl<span class="p">&amp;</span><span class="nv">auth_mode</span><span class="o">=</span>login<span class="p">&amp;</span><span class="nv">username</span><span class="o">=</span><span class="p">&amp;</span><span class="nv">password</span><span class="o">=</span>
<span class="c1">###&lt; symfony/swiftmailer-bundle ###</span>

<span class="c1"># ...</span>
</pre></div>
</td></tr></table></div></div>
<p>Essas opções não estão definidas dentro do arquivo <code class="docutils literal notranslate">config/services.yaml</code> porque
elas não têm nada a ver com o comportamento da aplicação. Em outras palavras, sua
aplicação não se preocupa com a localização do seu banco de dados ou as credenciais
para acessá-lo, desde que o banco de dados esteja configurado corretamente.</p>
<p>Para sobrescrever essas variáveis ​​com valores específicos da máquina ou valores sensíveis, crie
um arquivo <code class="docutils literal notranslate">env.local</code>. Esse arquivo não deve ser adicionado ao controle de versão.</p>
<div class="admonition-wrapper">
<div class="admonition caution"><p class="first admonition-title">Cuidado</p>
<p class="last">Cuidado com o dump do conteúdo das variáveis ​​``$ _SERVER`` e <code class="docutils literal notranslate">$ _ENV</code>
ou a saída do conteúdo do <code class="docutils literal notranslate">phpinfo()</code> irá mostrar os valores do
variáveis ​​de ambiente, expondo informações sensíveis como as credenciais
do banco de dados.</p>
</div></div>
<div class="section" id="parametros-canonicos">
<span id="best-practices-canonical-parameters"></span><h3>Parâmetros Canônicos<a class="headerlink" href="#parametros-canonicos" title="Link permanente para este título">¶</a></h3>
<div class="admonition-best-practice admonition best-practice">
<p class="first admonition-title">Best Practice</p>
<p class="last">Defina todas as variáveis env da sua aplicação no arquivo <code class="docutils literal notranslate">.env</code>.</p>
</div></div>
<p>O Symfony inclui um arquivo de configuração chamado <code class="docutils literal notranslate">.env</code> na raiz do projeto, que
armazena a lista canônica de variáveis ​​de ambiente para o aplicação. Este
arquivo deve ser armazenado no controle de versão e, portanto, deve conter apenas
valores padrão não-sensíveis.</p>
<div class="admonition-wrapper">
<div class="admonition caution"><p class="first admonition-title">Cuidado</p>
<p class="last">As aplicações criadas antes de novembro de 2018 tinham um sistema ligeiramente diferente,
envolvendo um arquivo <code class="docutils literal notranslate">.env.dist</code>. Para obter informações sobre atualização, consulte:
<code class="xref doc docutils literal notranslate">/configuration/dot-env-changes</code>.</p>
</div></div>
</div>
</div>
<div class="section" id="configuracao-relacionada-a-aplicacao">
<h2>Configuração Relacionada à Aplicação<a class="headerlink" href="#configuracao-relacionada-a-aplicacao" title="Link permanente para este título">¶</a></h2>
<div class="admonition-best-practice admonition best-practice">
<p class="first admonition-title">Best Practice</p>
<p class="last">Defina as opções de configuração relacionadas ao comportamento da aplicação no
arquivo <code class="docutils literal notranslate">config/services.yaml</code>.</p>
</div></div>
<p>O arquivo <code class="docutils literal notranslate">services.yaml</code> contém as opções usadas pela aplicação para
modificar seu comportamento, como o remetente de notificações por email ou o
<a class="reference external" href="https://en.wikipedia.org/wiki/Feature_toggle">feature toggles</a> habilitado. Definir esses valores no arquivo <code class="docutils literal notranslate">.env</code> adicionaria
uma camada extra de configuração que não é necessária porque você não precisa ou quer
que esses valores de configuração alterem em cada servidor.</p>
<p>As opções de configuração definidas no <code class="docutils literal notranslate">services.yaml</code> podem variar de um
<code class="xref doc docutils literal notranslate">ambiente</code> para outro. É por isso que o Symfony
suporta definir arquivos <code class="docutils literal notranslate">config/services_dev.yaml</code> e <code class="docutils literal notranslate">config/services_prod.yaml</code>
para que você possa sobrescrever valores específicos para cada ambiente.</p>
<div class="section" id="constantes-vs-opcoes-de-configuracao">
<h3>Constantes vs Opções de Configuração<a class="headerlink" href="#constantes-vs-opcoes-de-configuracao" title="Link permanente para este título">¶</a></h3>
<p>Um dos erros mais comuns ao definir a configuração da aplicação é
criar novas opções para valores que nunca mudam, como o número de itens para
resultados paginados.</p>
<div class="admonition-best-practice admonition best-practice">
<p class="first admonition-title">Best Practice</p>
<p class="last">Use constantes para definir opções de configuração que raramente mudam.</p>
</div></div>
<p>A abordagem tradicional para definir as opções de configuração fez com que muitas
aplicações Symfony incluíssem uma opção como a seguinte, que seria usada
para controlar o número de postagens a serem exibidas na página inicial do blog:</p>
<div class="literal-block"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/services.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">homepage.number_of_items</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>
</pre></div>
</td></tr></table></div></div>
<p>Se você já fez algo assim no passado, é provável que você realmente
<em>nunca</em> precisou mudar esse valor. Criar uma opção de configuração para
um valor que você nunca vai configurar simplesmente não é necessário.
Nossa recomendação é definir esses valores como constantes em sua aplicação.
Você poderia, por exemplo, definir uma constante <code class="docutils literal notranslate">NUMBER_OF_ITEMS</code> na entidade <code class="docutils literal notranslate">Post</code>:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Entity/Post.php</span>
<span class="k">namespace</span> <span class="nx">App\Entity</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Post</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="no">NUMBER_OF_ITEMS</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>A principal vantagem de definir constantes é que você pode usar seus valores
em qualquer lugar na aplicação. Ao usar parâmetros, eles estão disponíveis apenas
de lugares com acesso ao contêiner do Symfony.</p>
<p>Constantes podem ser usadas por exemplo em seus templates Twig graças a
<a class="reference external" href="https://twig.symfony.com/doc/2.x/functions/constant.html">função constant()</a>:</p>
<div class="literal-block"><div class="highlight-html+twig"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Displaying the <span class="cp">{{</span> <span class="nv">constant</span><span class="o">(</span><span class="s1">&#39;NUMBER_OF_ITEMS&#39;</span><span class="o">,</span> <span class="nv">post</span><span class="o">)</span> <span class="cp">}}</span> most recent results.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div></div>
<p>As entidades e repositórios do Doctrine agora podem acessar facilmente esses valores,
enquanto eles não podem acessar os parâmetros do contêiner:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">App\Repository</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Entity\Post</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Doctrine\ORM\EntityRepository</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">PostRepository</span> <span class="k">extends</span> <span class="nx">EntityRepository</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">findLatest</span><span class="p">(</span><span class="nv">$limit</span> <span class="o">=</span> <span class="nx">Post</span><span class="o">::</span><span class="na">NUMBER_OF_ITEMS</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>A única desvantagem notável de usar constantes para esse tipo de valores de
configuração é que você não pode redefini-los facilmente em seus testes.</p>
</div>
</div>
<div class="section" id="nomeacao-de-parametros">
<h2>Nomeação de Parâmetros<a class="headerlink" href="#nomeacao-de-parametros" title="Link permanente para este título">¶</a></h2>
<div class="admonition-best-practice admonition best-practice">
<p class="first admonition-title">Best Practice</p>
<p class="last">O nome dos seus parâmetros de configuração deve ser o mais curto possível e
deve incluir um prefixo comum para a aplicação inteira.</p>
</div></div>
<p>Usar o <code class="docutils literal notranslate">app</code> como prefixo dos seus parâmetros é uma prática comum para evitar
colisões com os parâmetros de bibliotecas/bundles do Symfony e de terceiros. Então, use
apenas uma ou duas palavras para descrever o objetivo do parâmetro:</p>
<div class="literal-block"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/services.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
    <span class="c1"># don&#39;t do this: &#39;dir&#39; is too generic and it doesn&#39;t convey any meaning</span>
    <span class="l l-Scalar l-Scalar-Plain">app.dir</span><span class="p p-Indicator">:</span> <span class="s">&#39;...&#39;</span>
    <span class="c1"># do this: short but easy to understand names</span>
    <span class="l l-Scalar l-Scalar-Plain">app.contents_dir</span><span class="p p-Indicator">:</span> <span class="s">&#39;...&#39;</span>
    <span class="c1"># it&#39;s OK to use dots, underscores, dashes or nothing, but always</span>
    <span class="c1"># be consistent and use the same format for all the parameters</span>
    <span class="l l-Scalar l-Scalar-Plain">app.dir.contents</span><span class="p p-Indicator">:</span> <span class="s">&#39;...&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">app.contents-dir</span><span class="p p-Indicator">:</span> <span class="s">&#39;...&#39;</span>
</pre></div>
</td></tr></table></div></div>
<hr class="docutils" />
<p>Próximo: <code class="xref doc docutils literal notranslate">/best_practices/business-logic</code></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            LANGUAGE:'pt_BR',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>